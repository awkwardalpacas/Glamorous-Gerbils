<!DOCTYPE html>
<html ng-app = "nomNow">
 <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>NomNow2.0 | Skip the lines, not the lunch.</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js">
    </script>
    <link rel="stylesheet" type="text/css" href = "./bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>

  </head>
  <body>
    <div ng-view></div>

    <script src = "./bower_components/angular/angular.js"></script>
    <script src="./bower_components/angular-route/angular-route.js"></script>
    <script src= "./bower_components/angular-bootstrap/ui-bootstrap.js"></script>
    <script src = "./bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src = "./bower_components/jquery/dist/jquery.min.js"></script>
    <script src = "app/app.js"></script>
    <script src = "app/map/map.js"> </script>
    <script src = "app/services.js"></script>
    <script src = "app/modal/modal.js"> </script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script>
      var displayGraph = function (id, placename) {
        // append graph to id="graph-link" in the infowindow using highcharts
        $('#graph-link').highcharts({
          title: {
            text: 'Average Wait for ' + placename + ', Last 5 Days',
            x: 20
          },
          xAxis: {
            categories: ['8AM', '9AM', '10AM', '11AM', '12AM', '1PM', '2PM', '3PM', '4PM', '5PMM', '6PM', '7PM']
          },
          yAxis: {
            title: {
              text: 'Wait (min)'
            }
          },
          legend: {
            enabled: false
          },
          series: [{
            data: [10, 15, 20, 30]
          }]
        });
      };

      $('body').on('click', '#graph-link', function (event) {
        var id = $(this).data('id');
        var placename = $(this).data('name');

        $(this).css({
          height: '250px',
          margin: '0 auto',
          width: '300px'
        });

        displayGraph(id, placename);
      });
    </script>
  </body>
</html>
